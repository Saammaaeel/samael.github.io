<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>1 new message</title>
        <link href="/anniv/css/main.min.css" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="/anniv/star.ico"/>
    </head>
    <body>
        <div id="mobile" :class="{ 'has-prompt': hasPrompt }">
            <div id="mobile-head">
                <div id="mobile-head-title">Ndut</div>
            </div>
            <div id="mobile-body">
                <div id="mobile-body-bg"></div>
                <div id="mobile-body-content">
                    <div id="mock-msg-row" class="msg-row">
                        <div id="mock-msg" class="msg" v-html="latestMsgContent"></div>
                    </div>
                    <div class="msg-row"
                        v-for="(msg, index) in messages"
                        :key="index"
                        :class="msg.author === 'author' ? 'msg-author' : 'msg-me'"
                        :style="`animation-delay: ${index * 0.05}s`">
                        <div class="avatar">
                            <img :src="'/anniv/' + (msg.author === 'author' ? 'bubu.jpg' : 'dudu.jpg')" :alt="msg.author" />
                        </div>
                <div class="msg-wrapper">
                <div class="msg msg-fade-in"
                    :class="{ 'msg-poem': msg.isPoem && msg.author === 'author', 'msg-poem-author': msg.isPoem && msg.author === 'me' }"
                    v-html="msg.content"></div>
                            <div class="msg-reactions" v-if="!msg.isTyping">
                                <button class="reaction-btn" @click="addReaction(msg, '‚ù§Ô∏è')" :class="{active: msg.reactions && msg.reactions.includes('‚ù§Ô∏è')}">‚ù§Ô∏è</button>
                                <button class="reaction-btn" @click="addReaction(msg, 'üëç')" :class="{active: msg.reactions && msg.reactions.includes('üëç')}">üëç</button>
                                <button class="reaction-btn" @click="addReaction(msg, 'üòÇ')" :class="{active: msg.reactions && msg.reactions.includes('üòÇ')}">üòÇ</button>
                            </div>
                            <div class="msg-reaction-display" v-if="msg.reactions && msg.reactions.length > 0">
                                <span v-for="reaction in msg.reactions" :key="reaction">{{ reaction }}</span>
                            </div>
                            <div class="msg-timestamp" v-if="!msg.isTyping">{{ formatTimestamp(msg.timestamp) }}</div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="mobile-foot">
                <div id="prompt">
                    <div id="prompt-head">
                        <div class="say-something">Reply‚Ä¶‚Ä¶</div>
                        <a href="javascript:;" class="close-btn" title="Close"
                            v-on:click="togglePrompt(false)"></a>
                    </div>
                    <div id="prompt-body">
                        <ul class="responses" v-if="lastDialog">
                            <li v-for="res in lastDialog.responses">
                                <a href="javascript:;" v-on:click="respond(res)">{{ res.content }}</a>
                            </li>
                        </ul>
                        <div class="next-topic"
                            v-if="!lastDialog || !lastDialog.responses">
                            <ul class="topics">
                                <li v-for="topic in nextTopics">
                                    <a href="javascript:;" v-on:click="ask(topic)">{{ topic.brief }}</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="input-hint" class="say-something"
                    v-on:click="togglePrompt(true)"
                    :class="{'clickable': !isTyping }">
                    <span v-if="!isTyping">Reply‚Ä¶‚Ä¶</span>
                    <span v-if="isTyping">Ndut is typing</span>
                </div>
            </div>
            <div id="prompt-bg" v-on:click="togglePrompt(false)"></div>
        </div>

        <script src="https://unpkg.com/zepto@1.2.0/dist/zepto.min.js"></script>
        <script src="https://unpkg.com/vue@2.2.6/dist/vue.min.js"></script>
        
        <script src="/anniv/src/index.js"></script>
    </body>
</html>
